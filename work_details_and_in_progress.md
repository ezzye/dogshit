| Step | Area                       | Key Objectives | Status      | Owner | Notes / Next Actions | Target Date |
| ---- | -------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | ----------- | ----- | -------------------------------------------------------------------- | ----------- |
| 0    | Foundation & Safety Net    | ✅ Reliable test harness (pytest + behave)  <br>✅ CI (lint, mypy, unit, BDD, container builds) <br>✅ Remove dead code & obsolete tests | Complete    | —     | Dead modules removed |             |
| 1    | Desktop Extractor          | • PDF parsers (Barclays required; HSBC/Lloyds optional) <br>• Mask PII (sort code, IBAN, PAN last4, etc.) <br>• Output JSONL per `transaction_v1.json` <br>• PyInstaller builds (Win/macOS) | In Progress | —     | Barclays parser & CLI extraction implemented; extend parser registry |             |
| 2    | Backend Skeleton           | • Endpoints: upload, status, download (summary/report), rules, classify <br>• SQLite persistence (SQLModel) <br>• Magic‑link auth (dev bypass) <br>• Signed URLs (time‑limited HMAC) <br>• Upload limit 100 MB; MIME `application/x-ndjson`, `text/plain`, optional gzip | In Progress | —     | Endpoints /upload, /status, /download, /rules, /classify; magic-link token auth (dev bypass); upload validation: MIME types, 100 MB limit, optional gzip |             |
| 3    | Rules Engine               | • Implement `heuristic_rule_v1.json` <br>• Merge global & per‑user rules (per‑user override) <br>• Precedence: priority → confidence → version/updated_at <br>• Versioning: monotonic integer | In Progress |       | Merge global & per-user rule sets; add tests for precedence and versioning |             |
| 4    | LLM Classification Service | • OpenAI‑compatible adapter (batching, retries, cost guardrails) <br>• Normalised merchant signature (lowercase, strip punctuation/diacritics, collapse whitespace, drop suffixes/prefixes, trim dynamic digits) <br>• Auto‑learn rules when confidence ≥ 0.85; overwrite only if ≥ 0.95 and scope not narrower | Not Started |       | Log costs per job & daily roll‑up; enforce MAX_DAILY_COST_GBP (classification & report budgets) |             |
| 5    | Frontend MVP               | • Vite + React + TS + Tailwind + shadcn/ui <br>• Views: Upload → Progress → Results (download analysis & PDF) <br>• Optional rules view + “Suggest a correction” POST /feedback <br>• E2E tests (Playwright) | Not Started |       | |             |
| 6    | Analytics & Summarisation  | • `analytics.py`: monthly totals, recurring detection (merchant + periodicity ±10% amount variance), overspending (MoM ≥ 30%, merchant 75th percentile, recurring +15%) <br>• Canonical categories in `data/taxonomy/categories.json` <br>• Output `summary_v1.json` & CSV | Not Started |       | |             |
| 7    | Savings Report Generation  | • LLM returns structured JSON + Markdown body <br>• HTML → PDF with WeasyPrint; stylesheet A4 accessible <br>• Cancellation links: curated `data/cancellations.json` + validated LLM suggestions | Not Started |       | |             |
| 8    | Packaging & Orchestration  | • `docker-compose.yml` for api, worker, redis, frontend, db, storage volume <br>• Make targets: up/down/logs/seed/test/e2e (seed idempotent) <br>• PyInstaller artefacts published for Win & macOS per release tag | Not Started |       | |             |
| 9    | Docs & Hand-off            | • Update README (quick start), MODULES.md (architecture), CHANGELOG.md <br>• PR checklist & screencasts/notes for manual checks | Not Started |       | |             |

To be read in conjunction with notes.md and REFACTOR_PLAN.md
